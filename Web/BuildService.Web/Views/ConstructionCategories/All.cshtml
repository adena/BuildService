@using BuildService.Web.ViewModels.ConstructionWorks
@model BuildService.Data.Models.ConstructionCategory

@{
    ViewData["Title"] = "All";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
    <div class="d-flex"><h1>Категории</h1></div>

    <a class="btn btn-info btn-lg m-3" href="~/ConstructionCategories/Create" role="button">Добави категория</a>

    <table class="table table-hover w-25">
        <thead>
            <tr>
                <th scope="col" class="counterCell"></th>
                <th scope="col">Наименование</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var category in (List<CategoryViewModel>)ViewData["Categories"])
            {
                <tr>
                    <th scope="col" class="counterCell"></th>
                    <th scope="row">@category.Name</th>
                </tr>
            }
        </tbody>
    </table>



@*<form method="POST" action="ConstructionCategories/GetCategoryWorks">
        <select class="custom-select" id="categoryId" name="categoryName">
            <option selected disabled>Изберете категория</option>
            @foreach (var category in (List<CategoryViewModel>)ViewData["Categories"])
            {
                <option value="@category.Id">@category.Name</option>
            }
        </select>
    </form>*@

@*<script type="text/javascript">

    jQuery(document).ready(function () {
        $("#categoryId").change(function () {
            var id = $(this).find(":selected").val()
            var categoryId = { "categoryId": id }
            console.log(id)
            $.ajax({
                url: "/ConstructionCategories/GetCategoryWorks",
                data: JSON.stringify(categoryId),
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    document.getElementById('Works').innerHTML = data;
                }
            });
        });
    });
</script>*@

